
\section{Héritage}


\subsection{Généralités}

\begin{frame}
  \frametitle{Définition\chrono}
   \initclock
\begin{defi}[Héritage]
Mécanisme spécifique aux langages orientés objet qui
permet à une classe B (appelée sous-classe ou 
classe fille) d'hériter de toutes les propriétés d'une classe A (appelée
super-classe ou classe mère). 
\end{defi}

Utilité :
\begin{itemize}
\item Factorisation du code
\item Gérer des différents de manière similaire
\item Augmente la réutilisabilité
\end{itemize}
\end{frame}


\begin{frame}
  \frametitle{Exemple\chrono}

  \only<1>{
    \begin{itemize}
    \item Gestion de figures géométriques
    \item Différents types de figures : cercles et rectangles
    \item Propriétés communes (position du centre de la figure)
    \item Propriétés spécifiques (rayon du cercle, longueur et largeur du
      rectangle)
    \item[$\Rightarrow$] trois classes
    \end{itemize}}
  \only<2>{
%    \centering   \includegraphics[width=5cm,angle=-90]{figures}
\begin{center}
\tikzstyle{classe}=[rectangle, draw=black, rounded corners, fill=blue!50, drop shadow, text centered, anchor=north, text=white, text width=2cm, rectangle split, rectangle split parts=3]
\tikzstyle{extends}=[->, >=open triangle 90, thick]
  \begin{tikzpicture}[node distance=1.5cm,scale=0.5, font=\scriptsize]
    \node (figure) [classe]
    {
      \textbf{Figure}
      \nodepart{second}\texttt{\_abscisse\\\_ordonnee}
      %\nodepart{third}\texttt{}
    };
    \node (AuxNode01) [text width=0.5cm, below=of figure] {};
    \node (cercle) [classe, left=of AuxNode01]
    {
      \textbf{Cercle}
      \nodepart{second}\texttt{\_\_rayon}
      %\nodepart{third}\texttt{}
    };
    \node (rectangle) [classe, right=of AuxNode01]
    {
      \textbf{Rectangle}
      \nodepart{second}\texttt{\_\_longueur\\\_\_largeur}
      %\nodepart{third}\texttt{}
    };
    \draw[extends] (cercle.north) --  (figure.south west);
    \draw[extends] (rectangle.north) --  (figure.south east);
  \end{tikzpicture}
\end{center}
  }
\end{frame}

\begin{frame}
  \frametitle{Héritage multiple}
  \only<1,3>{
    \begin{remarque}[Héritage multiple]
      Python, à l'encontre de certains langages, permet d'hériter de plusieurs classes. 
    \end{remarque}
    
  }
  \only<3>{


    \begin{alertblock}{Attention}
      L'héritage multiple entraîne des problèmes théoriques lorsqu'on hérite plusieurs fois du même parent.
			\\ $\Longrightarrow$ linéarisation de l'ordre de l'héritage
    \end{alertblock}
  }
  \only<2>{
		Exemple :
    D hérite de B et C, B et C héritent de A.
    \begin{center}
      \includegraphics[width=5cm]{images/heritage_multiple.png}
    \end{center}
  }
\end{frame}
%

\subsection{Héritage en Python}

\begin{frame}
  \frametitle{Héritage en Python\chrono}
  \only<1,3>{
    \begin{itemize}
    \item En Python : l'héritage est défini  entre les parenthèses
		\item Le constructeur est la méthode nommée \emph{$\_\_init\_\_$}
    \item Visibilité des variables d'instance :  ($\_\_$) $\Longrightarrow$ décorateurs
    \item Si aucun héritage n'est précisé : hérite de \emph{object}
    \end{itemize}
    \begin{exemple}[Figures]
		\small
      \begin{semiverbatim}
			\vspace{-0.5cm}
        class Figure (object):
        
				\hspace{0.5cm}def \_\_init\_\_(self,x, y):
				
        \hspace{1cm}\textcolor{red}{self.\_abscisse} = x

        \hspace{1cm}\textcolor{red}{self.\_ordonnee} = y
        
				\only<1>{
				
				f1 = Figure(10,2) \textcolor{green}{\# création de l'objet f1}
				
				f2 = Figure(0, 4) \textcolor{green}{\# création de l'objet f2}}
				\only<3>{class Cercle \textcolor{red}{(Figure)}:
        
				\hspace{0.5cm}def \_\_init\_\_(self,x=0, y=0, r=0):
				
        \hspace{1cm}super().\_\_init\_\_(x,y) \textcolor[rgb]{0,0.58,0}{\# définit et initialise }
				
				\hspace{1cm}self.\_rayon = r    \hspace{0.7cm}   \textcolor[rgb]{0,0.58,0}{\# \_abscisse et \_ordonnee}
}
      \end{semiverbatim}
    \end{exemple}}
  \only<2,4>{
\begin{center}
\tikzstyle{classe}=[rectangle, draw=black, rounded corners, fill=blue!50, drop shadow, text centered, anchor=north, text=white, text width=2cm, rectangle split, rectangle split parts=3]
\tikzstyle{extends}=[->, >=open triangle 90, thick]
  \begin{tikzpicture}[node distance=1.5cm,scale=0.5, font=\scriptsize]
    \node (figure) [classe]
    {
      \textbf{Figure}
      \nodepart{second}\texttt{\_abscisse\\\_ordonnee}
      \nodepart{third}\texttt{+ Figure()}
    };
		
    \only<4>{
    \node (cercle) [classe, right=of figure]
    {
      \textbf{Cercle}
      \nodepart{second}\texttt{\_rayon}
      \nodepart{third}\texttt{+ Cercle()}
    };
    \draw[extends] (cercle.text west) --  (figure.text east);
}
  \end{tikzpicture}
\end{center}
    %\includegraphics[height=4cm]{herite2}
  \only<2>{
	\texttt{f = Figure(10,11) \textcolor[rgb]{0,0.58,0}{\# Création de l'objet figure f}\\
  f1 = Figure (1,5) \textcolor[rgb]{0,0.58,0}{\#  Création de l'objet Figure f1}}
	}
	  \only<4>{
	\texttt{f= Figure(10,11) \textcolor[rgb]{0,0.58,0}{\# Création de l'objet figure f}\\
  c= Cercle (1,5,3) \textcolor[rgb]{0,0.58,0}{\#  Création de l'objet Cercle c}}
	}
	}
\end{frame}

\begin{frame}
  \frametitle{Appel du constructeur de la super-classe}
  \only<1-8>{
  \begin{exemple}[Figures]
   \small
      \begin{semiverbatim}
			\vspace{-0.5cm}
        class \textcolor<5>{red}{Figure}(object):
        
				\hspace{0.5cm}def \textcolor<6>{red}{\_\_init\_\_(self,a, b)}:
				
        \hspace{1cm}\textcolor<7>{red}{self.\_abscisse = a }

        \hspace{1cm}\textcolor<7>{red}{self.\_ordonnee = b }
        
				class Cercle (\textcolor<5>{red}{Figure}):
        
				\hspace{0.5cm}def \textcolor<3>{red}{\_\_init\_\_(self,x=0, y=0, r=0)}:
				
        \hspace{1cm}\textcolor<4>{red}{super()}.\textcolor<6-7>{red}{\_\_init\_\_(x,y)} \textcolor[rgb]{0,0.58,0}{\# définit et initialise }
				
				\hspace{1cm}\textcolor<8>{red}{self.\_rayon = r }   \hspace{0.7cm}   \textcolor[rgb]{0,0.58,0}{\# \_abscisse et \_ordonnee}
				
				\only<1->{
				
				c = \textcolor<2>{red}{Cercle(10, 3, 2)} \textcolor{green}{\# création de l'objet c}
				}

      \end{semiverbatim}
 
  \end{exemple}}
  \only<9-10>{
\begin{center}
\tikzstyle{classe}=[rectangle, draw=black, rounded corners, fill=blue!50, drop shadow, text centered, anchor=north, text=white, text width=2cm, rectangle split, rectangle split parts=3]
\tikzstyle{extends}=[->, >=open triangle 90, thick]
\tikzstyle{uses}=[thick, arrows={-angle 60}]
  \begin{tikzpicture}[node distance=1.5cm,scale=0.5, font=\scriptsize]
    \node (figure) [classe]
    {
      \textbf{Figure}
      \nodepart{second}\texttt{\# \_abscisse\\\# \_ordonnee}
      \nodepart{third}\texttt{+ Figure()}
    };
    \node (cercle) [classe, right=of figure]
    {
      \textbf{Cercle}
      \nodepart{second}\texttt{\_rayon}
      \nodepart{third}\texttt{+ Cercle()}
    };
    \draw[extends] (cercle.text west) --  (figure.text east);
    \draw[uses,color=blue] (cercle.third east)+(-0.5,0) .. controls +(2,0.4)
    and +(2,0.4).. ([xshift=-0.5cm] cercle.second east);
   \only<10>{
    \draw[uses,color=red] (cercle.third) -- ([xshift=-0.6cm] figure.third east);
    \draw[uses,color=blue] (figure.third west)+(0.5,0) .. controls +(-2,0.4) and +(-2,0.4).. ([xshift=0.3cm] figure.second west);
    }
ond east);
  \end{tikzpicture}

\end{center}
%    \includegraphics[height=4cm]{herite3}

	}
\end{frame}





%\begin{frame}
  %\frametitle{Appel du constructeur de la super-classe}
  %\only<1,3>{
  %\begin{exemple}[Figures]
    %\begin{semiverbatim}
      %public class Figure \{
%
      %\hspace{1cm}public {\color<3>{red}Figure(int abs, int ord)} \{
%
      %\hspace{2cm}\textcolor{blue}{this.}abscisse = abs ; ordonnee = ord;
%
      %\hspace{1cm}\}
%
      %\}
%
      %public class Cercle extends Figure \{
      %
      %\hspace{1cm}private Cercle(int x, int y, int r) \{
%
      %\hspace{2cm}\only<1>{\textcolor{red}{super.}abscisse = x; \textcolor{red}{super.}ordonnee = y;}\only<3->{\textcolor{red}{super(x, y)};}
%
      %\hspace{2cm}\textcolor{blue}{this.}rayon = r;
%
      %\hspace{1cm}\}
%
      %\}
    %\end{semiverbatim}
  %\end{exemple}}
  %\only<2,4>{
%\begin{center}
%\tikzstyle{classe}=[rectangle, draw=black, rounded corners, fill=blue!50, drop shadow, text centered, anchor=north, text=white, text width=2cm, rectangle split, rectangle split parts=3]
%\tikzstyle{extends}=[->, >=open triangle 90, thick]
%\tikzstyle{uses}=[thick, arrows={-angle 60}]
  %\begin{tikzpicture}[node distance=1.5cm,scale=0.5, font=\scriptsize]
    %\node (figure) [classe]
    %{
      %\textbf{Figure}
      %\nodepart{second}\texttt{\# int abscisse\\\# int ordonnee}
      %\nodepart{third}\texttt{+ Figure()}
    %};
    %\node (cercle) [classe, right=of figure]
    %{
      %\textbf{Cercle}
      %\nodepart{second}\texttt{- int rayon}
      %\nodepart{third}\texttt{+ Cercle()}
    %};
    %\draw[extends] (cercle.text west) --  (figure.text east);
    %\draw[uses,color=blue] (cercle.third east)+(-0.5,0) .. controls +(2,0.4)
    %and +(2,0.4).. ([xshift=-0.5cm] cercle.second east);
    %\only<2>{
      %\draw[uses,color=red] (cercle.third) -- ([xshift=-0.3cm] figure.second east);
    %}
    %\only<4>{
    %\draw[uses,color=red] (cercle.third) -- ([xshift=-0.6cm] figure.third east);
    %\draw[uses,color=blue] (figure.third west)+(0.5,0) .. controls +(-2,0.4) and +(-2,0.4).. ([xshift=0.3cm] figure.second west);
    %}
%ond east);
  %\end{tikzpicture}
%
%\end{center}
%%    \includegraphics[height=4cm]{herite3}
%
	%}
%\end{frame}
%

\section{Polymorphisme}


\subsection{Généralités}

\begin{frame}
  \frametitle{Définition\chrono}
  \begin{defi}[Polymorphisme]
    Mécanisme selon lequel un même message peut être envoyé vers des objets de
    types différents, chaque objet réagissant de façon originale. 
  \end{defi}
  \uncover<2->{
  Objectif~:
  \begin{itemize}
  \item Rendre une certaine complexité de programmation transparente
  \item Faciliter la conception de programmes
  \end{itemize}}
\end{frame}


%\begin{frame}
  %\frametitle{Différents polymorphismes}
  %\begin{itemize}[<+->]
  %\item Le polymorphisme ad hoc (également \emph{surcharge} ou
    %\emph{overloading})
  %\item N'est pas un vrai polymorphisme : uniquement une facilité de notation
  %\end{itemize}
%
  %\begin{itemize}[<+->]
  %\item Le polymorphisme d'héritage (également \emph{redéfinition},
    %\emph{spécialisation} ou \emph{overriding})
  %\item Le vrai polymorphisme : association dynamique
  %\end{itemize}
%\end{frame}
%
%
%\subsection{Surcharge (early binding)}
%
%\begin{frame}
  %\frametitle{Principe}
%
  %Principe de la surcharge~:
  %\begin{itemize}[<+->]
  %\item Méthodes avec le même nom
    %\begin{itemize}
    %\item dans des classes différentes
    %\item avec des paramètres différents
    %\end{itemize}
  %\end{itemize}
%
  %\uncover<4->{
    %Exemples~:
    %\begin{itemize}
    %\item \emph{println} avec un paramètre de type entier, booléen, String, ...
    %\item Une méthode \emph{afficher} dans les classes \emph{Pile},
      %\emph{Rationnel}, ...
    %\end{itemize}}
  %
  %\uncover<5>{
    %Signification du terme :
    %\emph{early binding} $\Rightarrow$ choix de la méthode lors de la
    %compilation 
  %}
%\end{frame}
%
%\begin{frame}
  %\frametitle{Surcharge en Java}
%
  %\only<1,3,5,7,8,10>{
  %\begin{exemple}[Constructeur]
    %\begin{semiverbatim}
      %public class {\color<1-3>{red}Figure2D} \{
%\only<1-5>{
%
      %\hspace{1cm}private int abscisse;
%
      %\hspace{1cm}private int ordonnee;}
%\uncover<3->{
%
      %\hspace{1cm}public {\color<8>{red}{\color<2-5>{red}Figure2D}(int abs, int ord)} \{
%
      %\hspace{2cm}abscisse = abs ;
%
      %\hspace{2cm}ordonnee = ord;
%
      %\hspace{1cm}\}}
%\uncover<5->{
%
      %\hspace{1cm}public {\color<10>{red}{\color<5>{red}Figure2D}()} \{
%
      %\hspace{2cm}this(0,0);
%
      %\hspace{1cm}\}}
%\only<7->{
%
      %\hspace{1cm}public static void main(String args[]) \{
%
%\uncover<8->{      \hspace{2cm}Figure2D f1 = new {\color<8>{red}Figure2D(1,2)};
%
%}
%\uncover<10->{      \hspace{2cm}Figure2D f1 = new {\color<10>{red}Figure2D()};
%
%}
      %\hspace{1cm}\}}
    %\end{semiverbatim}
  %\end{exemple}}
%\only<2,4,6,9,11>{
%\begin{center}
%\tikzstyle{classe}=[rectangle, draw=black, rounded corners, fill=blue!50, drop
%shadow, text centered, text=white, text width=2.8cm, rectangle
%split, rectangle split parts=3]
%\tikzstyle{extends}=[->, >=open triangle 90, thick]
%\tikzstyle{uses}=[thick, arrows={-angle 60}]
%\pgfdeclarelayer{background}
%\pgfdeclarelayer{foreground}
%\pgfsetlayers{background,main,foreground}
  %\begin{tikzpicture}[node distance=1cm,scale=0.5, font=\scriptsize]
    %\node (figure) [classe]
    %{
      %\textbf{Figure2D}
      %\nodepart{second}\texttt{\# int abscisse\\\# int ordonnee}
      %\nodepart{third}\texttt{\only<4->{+ Figure2D(int,int)\\\uncover<6->{+ Figure2D()}}}
    %};
    %\node (main) [below right=of figure] {main};
    %% 
    %\only<4,6>{
      %\draw[uses,color=blue] (figure.third east)+(-0.25,0.25) .. controls +(2,0.4) and +(2,0.4) .. ([xshift=-0.5cm,yshift=0.3cm] figure.second east);
      %\draw[uses,color=blue] (figure.third east)+(-0.25,0.25) .. controls +(1.5,0.4) and +(1.5,0.4) .. ([xshift=-0.5cm,yshift=-0.3cm] figure.second east);
  %}
    %% 
  %\only<6>{
    %\draw[uses,color=red] (figure.third east)+(-0.5,-0.25) .. controls
    %+(1.5,0.1) and +(1.5,0.1) .. ([xshift=-0.4cm,yshift=0.3cm] figure.third
    %east);
  %}
    %% 
  %\only<9>{
    %\draw[uses,color=red] (main) to[bend right=60]
    %([xshift=-0.4cm,yshift=0.3cm] figure.third east);
  %}
    %% 
  %\only<11>{
    %\draw[uses,color=red] (main) to[bend right=60]
    %([xshift=-0.4cm,yshift=-0.3cm] figure.third east);
  %}
    %\begin{pgfonlayer}{background}
      %% Compute a few helper coordinates
      %\path (figure.west |- figure.north)+(-0.5,0.3) node (a) {};
      %\path (main.south -| main.east)+(+0.3,-0.2) node (b) {};
      %\path[fill=yellow!20,rounded corners, draw=black!50, dashed] (a) rectangle (b);
    %\end{pgfonlayer}
%
  %\end{tikzpicture}
%\end{center}
%%\includegraphics[height=6cm]{constr1}
%}
%% \only<4>{
%% \includegraphics[height=6cm]{constr2}
%% }
%% \only<6>{
%% \includegraphics[height=6cm]{constr3}
%% }
%% \only<9>{
%% \includegraphics[height=6cm]{constr4}
%% }
%% \only<11>{
%% \includegraphics[height=6cm]{constr5}
%% }
%\end{frame}
%
%
%
\subsection{Polymorphisme d'héritage (redéfinition, spécialisation)}

\begin{frame}
  \frametitle{Principe\chrono}
  \begin{itemize}
  \item Plusieurs méthodes avec le même nom dans une
    hiérarchie de classes
  \item Méthode appelée : correspond à l'objet instancié
  \item Avantage : manipuler toutes les instances d'une hiérarchie de classes de manière
    uniforme
  \end{itemize}
  \uncover<2-4>{
	  \begin{exemple}[\only<2>{Jeux d'échecs}\only<4>{Figures 2D, cercles, rectangles}]
   \only<2>{ Méthode \emph{deplacer()} pour les pièces :  Roi, Reine, Fou, Cavalier
Tour et Pion (héritant chacun du type Piece).}
   
	\only<4>{Méthode \emph{aire()} : fournit la valeur l'aire pour Cercle et
    Rectangle.} 
 \only<3>{
\begin{semiverbatim}
\small
			\vspace{-0.5cm}		
		\textcolor[rgb]{0,0.58,0}{\# Déclaration d'une liste de pièces}
		
		liste\_pieces = [Pion(), Cavalier()]
		
		\textcolor[rgb]{0,0.58,0}{\# Appliquer la méthode déplacer à chaque pièce}
		
		\emph{for} piece \emph{in} liste\_pieces :
		
		 \hspace{1cm}\textcolor{red}{piece.deplacer()}
		
\end{semiverbatim}	
}	
  \end{exemple}
	}
\end{frame}


\begin{frame}
  \frametitle{Exemple\chrono}
  \begin{exemple}
    \begin{semiverbatim}
		\small
		\vspace{-.5cm}
		 import numpy as np
		
     class Figure (object):
		 			
			\hspace{1cm}...
			
      class Cercle (Figure): 
			
			\hspace{1cm}...
			
			\hspace{1cm}\textcolor[rgb]{1,0,0}{def aire()}:
			
      \hspace{2cm}return np.pi * self.\_rayon**2
			
			 class Rectangle (Figure): 
			
			\hspace{1cm}... \textcolor[rgb]{0,0.58,0}{\# avec 2 var d'instance self.\_h, et self.\_l}
			
			\hspace{1cm}\textcolor[rgb]{1,0,0}{def aire():}
			
      \hspace{2cm}return self.\_h * self.\_l
			
			
    \end{semiverbatim}
  \end{exemple}
\end{frame}

\begin{frame}
  \frametitle{Utilisation des figures\chrono}
  \begin{exemple}
    \begin{semiverbatim}
      
      liste\_figures = []
			
			liste\_figures.append(\textcolor[rgb]{1,0,0}{Cercle(10, 11, 2)}) \pause
			
			liste\_figures.append(\textcolor[rgb]{1,0,0}{Rectangle(10,5, 3, 4))} 
      
			.... \pause
			

      \emph{for} i \emph{in} range(len(liste\_figures)):
			
      \hspace{1cm}print(liste\_figures[i].\textcolor[rgb]{1,0,0}{aire()})

    \end{semiverbatim}
  \end{exemple}
\end{frame}

\begin{frame}
  \frametitle{Exemple de surcharge : méthode \_\_str\_\_\chrono}
 \begin{itemize}
  \item Méthode appelée pour convertir un objet en chaîne de caractères\pause
  \item[$\Rightarrow$] afficher directement les objets\pause
  \item Prédéfinie dans la classe \texttt{object} 
		\end{itemize}

	Exemple vu (le type \textcolor[rgb]{0,0,1}{Intervalle}) : l'affichage d'un objet \texttt{Intervalle}\pause \\
		
  Exemple d'affichage d'une figure \emph{f}:
  \begin{semiverbatim}
	\small
    f = Figure(3,5)
		
		print(f)\pause

    \only<-5>{\small \verb~<\_\_main\_\_.Figure object at 0x000000000575DBA8>~}\only<7->{\emph{Fig. Pos = (3,5)}}
  \end{semiverbatim}\pause

  \begin{semiverbatim}
    def \textcolor[rgb]{1,0,0}{\_\_str\_\_}(self):

      \hspace{0.5cm}\emph{return} "Fig. Pos = (\{0\},\{1\})".format(self.\_abscisse,\hspace{0.5cm}self.\_ordonnee)
  \end{semiverbatim}
\end{frame}

\begin{frame}
  \frametitle{Quelques méthodes à surcharger\chrono}
			\begin{center}
		
			\begin{tabular}{|l|l|}
			\hline
		  \rowcolor{blue!50}Méthode de la classe à surcharger & Utilisation \\
			\hline
		  object.\textcolor[rgb]{1,0,0}{\_\_str\_\_}(self) & \texttt{print(self) }\\
			\hline
		  object.\textcolor[rgb]{1,0,0}{\_\_repr\_\_}(self) & \texttt{self} \\
			\hline
			object.\textcolor[rgb]{1,0,0}{\_\_add\_\_}(self, other) & \texttt{self + other} \\
			\hline			
			object.\textcolor[rgb]{1,0,0}{\_\_sub\_\_}(self, other) & \texttt{self - other} \\
			
			object.\textcolor[rgb]{1,0,0}{\_\_mul\_\_}(self, other) & \texttt{self * other} \\
			\hline
			object.\textcolor[rgb]{1,0,0}{\_\_and\_\_}(self, other) & \texttt{self \emph{and} other} \\
			\hline
			object.\textcolor[rgb]{1,0,0}{\_\_or\_\_}(self, other) & \texttt{self \emph{or} other} \\
			\hline
			object.\textcolor[rgb]{1,0,0}{\_\_len\_\_}(self) & \texttt{len(self)} \\
			\hline
			object.\textcolor[rgb]{1,0,0}{\_\_getitem\_\_}(self,i) & \texttt{x = self[i]} \\
			\hline
			object.\textcolor[rgb]{1,0,0}{\_\_setitem\_\_}(self, i) & \texttt{self[i]= y }\\
			\hline
			\end{tabular}
\end{center}
\end{frame}

\section{Variables et méthodes de classe}


\begin{frame}
  \frametitle{Principe\chrono}
  \begin{itemize}
  \item Variables et méthodes propriétés de la classe, pas de l'instance
  \item $\Rightarrow$ un seul exemplaire par classe
  \item Accessible depuis les classes et les instances
  \item Utilisation le décorateur \emph{\verb~@classmethod~} avec comme premier argument \emph{cls} et non pas \texttt{self}
	\end{itemize}
  \pause
  \begin{remarque}
    On peut utiliser la fonction built-in \texttt{\emph{classmethod}(methdeClasse)} pour définir la méthode methodeClass() comme méthode de classe.
  \end{remarque}
\end{frame}



\begin{frame}
  \frametitle{Exemple\chrono}
  \begin{exemple}
    \textcolor<2>{red}{Comment compter les figures créées dans la classe \emph{Figure} (et ses classes filles)} ou attribuer un numéro unique à chaque objet~$?$
	\only<2-5>{	
	\small
    \begin{semiverbatim}
      class Figure (object):

      \hspace{.5cm}\textcolor<2>{red}{nb\_figure = 0}  \textcolor[rgb]{0,0.58,0}{\# variable de classe : compteur}

      \hspace{.5cm}def \_\_init\_\_(self, x, y):
      
			\hspace{1cm} self.\_abscisse = x
			
			\hspace{1cm} self.\_ordonnee = y
			
			\only<3->{\hspace{1cm} \textcolor<3>{red}{Figure.nb\_figures += 1}}
      
			\only<3->{\hspace{.5cm}\textcolor[rgb]{0.8,0.6,1}{@classmethod}
			
			\hspace{.5cm}def get\_nbfigures(\textcolor[rgb]{1,0,0}{cls}):
		
      \hspace{1.5cm}return Figure.nb\_figures}
		
		%	\only<4>{\hspace{2cm} self.\_no\_figure = Figure.nb\_figure}
		 \end{semiverbatim}
		}
  \end{exemple}

  %\begin{remarque}
    %Si des méthodes \emph{get} et \emph{set} sont nécessaires, elles sont
    %\emph{static}
  %\end{remarque}
\end{frame}

\begin{frame}
\frametitle{Exemple \chrono}
\small
    \begin{semiverbatim}
     
		x = Figure (2, 3) 
		
		print (Figure.get\_nbfigures()) \pause \textcolor[rgb]{0,0.58,0}{ \# => 1}
		
		y = Figure (0, 5)
		
		print (print (Figure.get\_nbfigures()) \pause  \textcolor[rgb]{0,0.58,0}{\# => 2})
			
\end{semiverbatim}
\begin{center}

\tikzstyle{classe}=[rectangle, draw=black, rounded corners, fill=blue!50, drop
shadow, text centered, text=white, text width=2cm, rectangle split, rectangle split parts=3]
\tikzstyle{static}=[rectangle, text justified, text=black, text width=2.5cm, rectangle split, rectangle split parts=2]
\tikzstyle{extends}=[->, >=open triangle 90, thick]
\tikzstyle{uses}=[thick, arrows={-angle 60}]
\pgfdeclarelayer{background}
\pgfdeclarelayer{foreground}
\pgfsetlayers{background,main,foreground}
  \begin{tikzpicture}[node distance=1cm,scale=0.5,
    font=\scriptsize,decoration={markings,mark=at position 0.5 with {
      \draw[-] (-4pt,-4pt) -- (4pt,4pt);
      \draw[-] (4pt,-4pt) -- (-4pt,4pt);}}]
    \node (figure1) [classe]
    {
      \textbf{x~: Figure}
      \nodepart{second}\texttt{\_abscisse=2\\\_ordonnee=3}
      \nodepart{third}\texttt{+ Figure()}
    };
    \node (figure2) [classe, right=of figure1]
    {
      \textbf{y~: Figure}
      \nodepart{second}\texttt{\_abscisse=0\\ \_ordonnee=5}
      \nodepart{third}\texttt{+ Figure()}
    };
    \node (main) [static,below right=of figure2]
    {
      \texttt{nb\_figures}
      \nodepart{second}\texttt{get\_nbfigures() \\}
    };
    \draw[uses,color=green!50!black] (figure1.third) |- ([yshift=-0.1cm] main.text west);
    \draw[uses,color=green!50!black] (figure2.third) |- ([yshift=0.1cm] main.text west);
%%    \node (tmpx) [below right=of figure1,xshift=-0.3cm,yshift=-0.5cm] {X};
    %\draw[uses,color=red] (main.second west) -- +(-0.8,0) |- ([yshift= 0.5cm ] 
    %main.txt west) ;

    \begin{pgfonlayer}{background}
      % Compute a few helper coordinates
      \path (figure1.west |- figure1.north)+(-0.5,0.3) node (a) {};
      \path (main.south -| main.east)+(+0.3,-0.2) node (b) {};
      \path[fill=yellow!20,rounded corners, draw=black!50, dashed] (a) rectangle (b);
    \end{pgfonlayer}
  \end{tikzpicture}
\end{center}  
\end{frame}


\section{Abstraction}


\subsection{Méthodes et classes abstraites}

\begin{frame}
  \frametitle{Méthodes abstraites\chrono}
  \begin{defi}[Méthode abstraite]
    Une méthode est abstraite si sa déclaration est précédée par le décorateur \emph{@abstractmethod}. Elle ne contient alors aucun code
		\uncover<3->{	
		Il n'est pas possible de l'appeler ssi :
		\begin{itemize}
			\item Sa classe est définie comme \emph{classe abstraite} $\Rightarrow$ définir dans les
    sous-classes. 
			\end{itemize}
	 }
  \end{defi}

  \uncover<2-3>{
  \begin{exemple} [Dans la classe \emph{Figure}]
   \small 
    \begin{semiverbatim}
		\vspace{-.5cm}
		from \textcolor<2>{red}{abc} import  \textcolor<2>{red}{abstractmethod}	\uncover<3>{\textcolor<3>{red}{ABCMeta}}	
		
		class Figure(\only<2>{object}\only<3>{\textcolor<3>{red}{metaclass=ABCMeta}}):
		
		\hspace{.5cm}...
		
		\hspace{.5cm}\textcolor[rgb]{1,0,0}{@abstractmethod}
		
    \hspace{.5cm}\emph{def} aire(self):
		
    \hspace{1cm}"""La méthode aire est déclarée abstraite.
		
		\hspace{1cm}"""
				
    \hspace{1cm}\emph{pass}

    \end{semiverbatim}
  \end{exemple}}
\end{frame}



\begin{frame}
  \frametitle{Héritage d'une classe abstraite\chrono}
  Héritage
  \begin{itemize}
  \item Une sous-classe d'une classe abstraite peut être concrète si elle
    redéfinit toutes les méthodes abstraites. Sinon, elle est considérée abstraite
  \item Exemple : \emph{aire} est redéfinie dans \emph{Cercle} et \emph{Rectangle}
  \end{itemize}
  \pause
  Intérêt :
  \begin{itemize}
  \item Déclarer explicitement qu'une classe n'est pas instanciable
  \item Définir les prototypes des méthodes dans la super-classe
  \end{itemize}
  \pause
  Exemple : Liste de \emph{Figure}
\end{frame}

\begin{frame}
  \frametitle{Exemple de classe abstraite\chrono}
  \begin{semiverbatim}
	\vspace{-.5cm}
	\small
    \emph{from} \textcolor[rgb]{1,0,0}{abc} \emph{import}  abstractmethod, ABCMeta
		
\only<1-2>{		
		\emph{class} Figure(metaclass = ABCMeta):
		
		\hspace{1cm}\textcolor[rgb]{1,0,0}{@abstractmethod}
		
		\hspace{1cm}\emph{def} aire(self):
		
		\hspace{2cm}\emph{pass}

    \emph{class} Cercle (Figure) :
		
		\hspace{1cm}...
		
    \hspace{1cm}\emph{def} aire(self):
				
    \hspace{2cm}\emph{return} np.pi * self.\_rayon**2
		
    \hspace{1cm}...\pause
	
		\emph{class} Rectangle (Figure) :
		
		\hspace{1cm}...
		
    \hspace{1cm}\emph{def} aire(self):
				
    \hspace{2cm}\emph{return} self.\_h *self.\_l
		
    \hspace{1cm}...
  }
	\only<3->{
	 l\_figures = [] 
   
	 \textcolor[rgb]{0,0.58,0}{\# création d'un objet Cercle et ajout à la liste}\pause
  
	 l\_figures.append(Cercle(10, 11, 1)) 
	
	 \textcolor[rgb]{0,0.58,0}{\# création d'un objet Rectangle et ajout à la liste}\pause
   
	 l\_figures.append(Rectangle(10,5, 3, 4)) 
	
	 \textcolor[rgb]{0,0.58,0}{\# tentation d'instancier la classe abstraire Figure}\pause
	 
	l\_figures.append(\textcolor{red}{Figure}(2,0)) \pause \textcolor{red}{\# => Error} \pause
	
	\textcolor[rgb]{0,0.58,0}{\# affichage de l'aire des objets }\pause
	
	\emph{for} f \emph{in} l\_figures :
	
	 \hspace{1cm}print(f.aire())
	

	}
  \end{semiverbatim}
 
\end{frame}

%
%\subsection{Interfaces}
%
%\begin{frame}
 %\frametitle{Définition}
%
 %\begin{defi}
   %Une interface $\simeq$ liste de méthodes (signature, \emph{i.e.}  mode
   %d'emploi). Un classe implémente une  
   %interface : capable d'exécuter toutes les méthodes prévues par
   %cette interface. 
 %\end{defi}
%\pause
 %\begin{remarque}
   %Une classe peut implanter plusieurs interfaces
 %\end{remarque}
%\pause
%
 %Implanter une interface : mot-clé \emph{implements}
%\pause
%
 %\begin{exemple}
   %\begin{semiverbatim}
     %public class MaFenetre implements KeyListener \{ 
%
     %...
   %\end{semiverbatim}
 %\end{exemple}
%\end{frame}
%
%
%\begin{frame}
 %\frametitle{Exemple}
 %\begin{exemple}
   %\begin{semiverbatim}
     %public Interface KeyListener \{
%
     %\hspace{1cm}public abstract void keyPressed(KeyEvent e);
%
     %\hspace{1cm}public abstract void keyReleased(KeyEvent e);
%
     %\hspace{1cm}public abstract void keyTyped(KeyEvent e);
%
     %\}\pause
%
     %public class MaFenetre implements KeyListener \{ 
%
     %\hspace{1cm}public void keyPressed(KeyEvent e) \{ ... \}
%
     %\hspace{1cm}public void keyReleased(KeyEvent e) \{ ... \}
%
     %\hspace{1cm}public void keyTyped(KeyEvent e) \{ ... \}
%
     %\}
   %\end{semiverbatim}
 %\end{exemple}
%\end{frame}
%
%\tikzstyle{classe}=[rectangle, draw=black, rounded corners, fill=blue!50, drop shadow, text centered, anchor=north, text=white, text width=2.5cm, rectangle split, rectangle split parts=3]
%\tikzstyle{interface}=[rectangle, draw=black, rounded corners, fill=green!35, drop shadow, text centered, anchor=north, text=black, text width=2.5cm, rectangle split, rectangle split parts=2]
%\tikzstyle{extends}=[->, >=open triangle 90, thick]
%\tikzstyle{implements}=[->, >=open triangle 90, thick, loosely dashed]
%\tikzstyle{line}=[-, thick]
%\tikzstyle{uses}=[thick, arrows={-angle 60}]
        %
%
%\begin{frame}
  %\frametitle{Utilité des interfaces}
  %\begin{itemize}
  %\item Sert à concevoir du code réutilisable
  %\item Est généralement associée à une classe
  %\end{itemize}
%\begin{center}
  %\begin{tikzpicture}[scale=0.5, font=\scriptsize]
    %\node (InterTri) [interface]
    %{
      %\textbf{InterfaceTri}
      %\nodepart{second}\texttt{etapeTri(int t[])}
    %};
    %\node (Graph) [classe, left=of InterTri]
    %{
      %\textbf{Graphique}
      %\nodepart{second}\texttt{int data[]}
      %\nodepart{third}\texttt{afficheTableau()}
    %};
    %\node (TriShell) [classe, below=of InterTri]
    %{
      %\textbf{TriShell}
      %\nodepart{third}\texttt{etapeTri(int t[])}
    %};
    %%\node (AuxNode01) [text width=4cm, below=of InterTri] {xxxxxx};
    %\node (TriBulle) [classe, left=of TriShell]
    %{
      %\textbf{TriBulle}
      %\nodepart{third}\texttt{etapeTri(int t[])}
    %};
    %\node (TriIns) [classe, right=of TriShell]
    %{
      %\textbf{TriInsersion}
      %\nodepart{third}\texttt{etapeTri(int t[])}
    %};
    %\draw[uses] (Graph.east) -- (InterTri.west);
    %\draw[implements] (TriBulle.north) -- ++(0,0.8) -| (InterTri.south);
    %\draw[implements] (TriShell) --  (InterTri.south);
    %\draw[implements] (TriIns.north) -- ++(0,0.8) -| (InterTri.south);
  %\end{tikzpicture}
%\end{center}
%
%\end{frame}

% \section{Fichiers}

% \subsection{Exceptions}

% \begin{frame}
%   \frametitle{Traitement}
%   Ne pas traiter une exception entraîne :
%   \begin{semiverbatim}
% unreported exception java.io.FileNotFoundException; {\color<3>{red}must be
%     caught} or {\color<4>{red}declared to be thrown}     
%   \end{semiverbatim}
% \pause
%   Deux possibilités :
%   \begin{itemize}
%   \item<3-| alert@3> traiter l'exception localement ;
%   \item<4-| alert@4> transmettre l'exception à la méthode appelante.
%   \end{itemize}
% \end{frame}

% \begin{frame}
%   \frametitle{Traitement local : \emph{try-catch-finally}}

%   Traiter une exception localement : utiliser le bloc \emph{try-catch-finally}.
%   \begin{itemize}
%   \item try : certaines instructions peuvent lever une exception
%   \item catch : traitement d'une exception
%   \item finally : instructions exécutées après le bloc \emph{try} et les
%     \emph{catch} éventuels.
%   \end{itemize}

% \end{frame}

% \begin{frame}
%   \frametitle{Syntaxe}
%   Syntaxe :
%   \begin{semiverbatim}
%     try \{

%       \hspace{1cm}...

%     \}~catch (Exception1 e) \{

%       \hspace{1cm}...

%     \}~catch (Exception2 e) \{

%       \hspace{1cm}...

%     \}~finally \{

%       \hspace{1cm}...

%     \}    
%   \end{semiverbatim}
% \end{frame}

% \subsection{Utilisation de fichiers}


% \subsubsection{Principe}

% \begin{frame}
%   \frametitle{Intérêt}

%   \begin{itemize}[<+->]
%   \item Accéder à des données persistantes
%   \item Nécessité de transférer les données en mémoire
%   \item[$\Rightarrow$] dans des variables
%   \item Différents types de fichiers
%     \begin{itemize}
%     \item texte
%     \item binaire
%     \end{itemize}
%   \item Accès en lecture ou en écriture
%   \end{itemize}
% \end{frame}

% \begin{frame}
%   \frametitle{API Java}

%   \begin{itemize}[<+->]
%   \item Comment accéder à un fichier ?
%   \item[$\Rightarrow$] Utilisation de l'API Java
%   \item $\simeq$ 50 classes disponibles dans \emph{java.io}
%   \end{itemize}

%   \pause

%   \begin{alertblock}{Important}
%     \href{http://tormo.ensieta.ecole/documentation/jdk1.5.0/api/index.html}{Consulter  l'API}
%   \end{alertblock}
% \end{frame}

% \begin{frame}
%   \frametitle{Lecture~: utilisation d'un \emph{BufferedReader}}
%   \begin{itemize}
%   \item<1-> Utilisation de \emph{BufferedReader}
%   \item<3-> lecture par \emph{readLine}
%   \end{itemize}

%   \only<-3>{
%     \begin{exemple}
%       \begin{semiverbatim}
%         \only<1-2>{    try \{

%           \hspace{1cm}{\color<2>{red}fichier = new FileReader (nomFichier);}

%           \}~catch (FileNotFoundException e) \{

%           \hspace{1cm}System.out.println(e);

%           \}
     
%           {\color<1>{red}BufferedReader lecteur = new
%             BufferedReader({\color<2>{red}fichier});}}
%         \only<3>{try \{

%           \hspace{1cm}while(({\color<3>{red}chaineLecture = lecteur.readLine()}) != null) \{

%           \hspace{2cm}System.out.println (chaineLecture);

%           \hspace{1cm}\}

%           \hspace{1cm}fichier.close();

%           \}~catch (IOException e) \{

%           \hspace{1cm}System.out.println(e);

%           \} }
%       \end{semiverbatim}
%     \end{exemple}}

%   \only<4->{
%     \begin{itemize}
%     \item Lecture de chaînes de caractères très facile
%     \item Possibilité de lire un fichier ligne à ligne
%     \end{itemize}
%     \vspace{1cm}
%     \begin{remarque}
%       Il existe une classe \emph{LineNumberReader} héritant de
%       \emph{BufferedReader} permettant de compter le nombre de lignes lues.
%     \end{remarque}
%     \vspace{1cm}
%   }
% \end{frame}


% \begin{frame}
%   \frametitle{Écriture sous forme de flot}
%   \begin{itemize}
%   \item<1-> Utilisation d'un \emph{PrintStream}
%   \item<2-> Permet d'écrire différents types de données
%   \item<2-> Ne génère pas d'exception
%   \end{itemize}

%   \begin{exemple}
%     \begin{semiverbatim}
%       \only<1>{
%         File monFic = new File(nomFichier);

%         try \{

%         \hspace{1cm}ecrivain = new PrintStream(new FileOutputStream(monFic));

%         \}~catch (FileNotFoundException e) \{

%         \hspace{1cm}System.out.println(e);

%         \}}
%       \only<2>{
%         String message="Un exemple de message.";

%         ecrivain.println(message);

%         ecrivain.print(42);

%         ecrivain.close();
%       }
%     \end{semiverbatim}
%   \end{exemple}
% \end{frame}


